// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url      = env("DATABASE_URL")
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model Appointment {
  id                String            @id @default(cuid())
  booking           Booking?          @relation("Appointment_booking", fields: [bookingId], references: [id])
  bookingId         String?           @unique @map("booking")
  doctor            Doctor?           @relation("Appointment_doctor", fields: [doctorId], references: [id])
  doctorId          String?           @unique @map("doctor")
  note              AppointmentNote?  @relation("Appointment_note", fields: [noteId], references: [id])
  noteId            String?           @unique @map("note")
  patient           Patient?          @relation("Appointment_patient", fields: [patientId], references: [id])
  patientId         String?           @map("patient")
  vitalsData        AppointmentVital? @relation("Appointment_vitalsData", fields: [vitalsDataId], references: [id])
  vitalsDataId      String?           @unique @map("vitalsData")
  scheduledStartsAt DateTime?
  scheduledEndsAt   DateTime?
  startedAt         DateTime?
  endedAt           DateTime?

  @@index([patientId])
}

model AppointmentNote {
  id          String       @id @default(cuid())
  appointment Appointment? @relation("Appointment_note")
  patient     Patient[]    @relation("Patient_appointmentNotes")
  body        String       @default("")
  title       String       @default("")
}

model AppointmentVital {
  id               String       @id @default(cuid())
  appointment      Appointment? @relation("Appointment_vitalsData")
  patient          Patient[]    @relation("Patient_appointmentVitals")
  feet             Int?
  inches           Int?
  lbs              Int?
  oxygenSaturation Int?
  heartRate        Int?
  temperature      Int?
  bloodPressure    String       @default("")
  resp             Int?
}

model Booking {
  id           String         @id @default(cuid())
  appointment  Appointment?   @relation("Appointment_booking")
  calendar     Calendar?      @relation("Booking_calendar", fields: [calendarId], references: [id])
  calendarId   String?        @map("calendar")
  doctor       Doctor?        @relation("Booking_doctor", fields: [doctorId], references: [id])
  doctorId     String?        @map("doctor")
  durationMins Int
  event        CalendarEvent? @relation("Booking_event", fields: [eventId], references: [id])
  eventId      String?        @map("event")
  isConfirmed  Boolean        @default(false)
  name         String         @default("")
  notes        String         @default("")
  patient      Patient?       @relation("Booking_patient", fields: [patientId], references: [id])
  patientId    String?        @map("patient")
  startsAt     DateTime?
  endsAt       DateTime?

  @@index([calendarId])
  @@index([doctorId])
  @@index([eventId])
  @@index([patientId])
}

model Calendar {
  id                String          @id @default(cuid())
  name              String          @default("")
  events            CalendarEvent[] @relation("CalendarEvent_calendar")
  bookings          Booking[]       @relation("Booking_calendar")
  user              User?           @relation("Calendar_user", fields: [userId], references: [id])
  userId            String?         @unique @map("user")
  schedules         Schedule[]      @relation("Schedule_calendar")
  defaultSchedule   Schedule?       @relation("Calendar_defaultSchedule", fields: [defaultScheduleId], references: [id])
  defaultScheduleId String?         @unique @map("defaultSchedule")
}

model CalendarEvent {
  id                     String             @id @default(cuid())
  bookings               Booking[]          @relation("Booking_event")
  calendar               Calendar?          @relation("CalendarEvent_calendar", fields: [calendarId], references: [id])
  calendarId             String?            @map("calendar")
  doctor                 Doctor?            @relation("CalendarEvent_doctor", fields: [doctorId], references: [id])
  doctorId               String?            @map("doctor")
  eventType              CalendarEventType? @relation("CalendarEvent_eventType", fields: [eventTypeId], references: [id])
  eventTypeId            String?            @map("eventType")
  description            String             @default("")
  durationMins           Int
  isConfirmationRequired Boolean            @default(false)
  schedule               Schedule?          @relation("CalendarEvent_schedule", fields: [scheduleId], references: [id])
  scheduleId             String?            @map("schedule")
  title                  String             @default("")

  @@index([calendarId])
  @@index([doctorId])
  @@index([eventTypeId])
  @@index([scheduleId])
}

model CalendarEventType {
  id     String          @id @default(cuid())
  label  String          @default("")
  value  String          @default("")
  events CalendarEvent[] @relation("CalendarEvent_eventType")
}

model Schedule {
  id             String          @id @default(cuid())
  title          String          @default("")
  description    String          @default("")
  calendar       Calendar?       @relation("Schedule_calendar", fields: [calendarId], references: [id])
  calendarId     String?         @map("calendar")
  events         CalendarEvent[] @relation("CalendarEvent_schedule")
  defaultOn      Calendar?       @relation("Calendar_defaultSchedule")
  recurringSlots RecurringSlot[] @relation("RecurringSlot_schedule")

  @@index([calendarId])
}

model RecurringSlot {
  id            String         @id @default(cuid())
  wday          String         @default("")
  isActive      Boolean        @default(false)
  interval      String         @default("")
  intervalCount Int?
  schedule      Schedule?      @relation("RecurringSlot_schedule", fields: [scheduleId], references: [id])
  scheduleId    String?        @map("schedule")
  timeIntervals TimeInterval[] @relation("TimeInterval_recurringSlot")

  @@index([scheduleId])
}

model TimeInterval {
  id              String         @id @default(cuid())
  from            String         @default("")
  to              String         @default("")
  recurringSlot   RecurringSlot? @relation("TimeInterval_recurringSlot", fields: [recurringSlotId], references: [id])
  recurringSlotId String?        @map("recurringSlot")

  @@index([recurringSlotId])
}

model Doctor {
  id                   String               @id @default(cuid())
  user                 User?                @relation("Doctor_user", fields: [userId], references: [id])
  userId               String?              @unique @map("user")
  appointments         Appointment?         @relation("Appointment_doctor")
  bookings             Booking[]            @relation("Booking_doctor")
  calendarEvents       CalendarEvent[]      @relation("CalendarEvent_doctor")
  doctorSince          DateTime
  doctorSpecialty      DoctorSpecialty?     @relation("Doctor_doctorSpecialty", fields: [doctorSpecialtyId], references: [id])
  doctorSpecialtyId    String?              @map("doctorSpecialty")
  doctorSubSpecialties DoctorSubSpecialty[] @relation("Doctor_doctorSubSpecialties")
  email                String               @default("")
  isCompleteProfile    Boolean              @default(false)
  isVerified           Boolean              @default(false)
  languages            DoctorLanguage[]     @relation("Doctor_languages")
  summary              String               @default("")
  patients             Patient[]            @relation("Doctor_patients")
  savedByPatients      Patient[]            @relation("Doctor_savedByPatients")

  @@index([doctorSpecialtyId])
}

model DoctorLanguage {
  id      String   @id @default(cuid())
  label   String   @default("")
  value   String   @default("")
  doctors Doctor[] @relation("Doctor_languages")
}

model DoctorSpecialty {
  id      String   @id @default(cuid())
  label   String   @default("")
  value   String   @default("")
  doctors Doctor[] @relation("Doctor_doctorSpecialty")
}

model DoctorSubSpecialty {
  id      String   @id @default(cuid())
  label   String   @default("")
  value   String   @default("")
  doctors Doctor[] @relation("Doctor_doctorSubSpecialties")
}

model HealthCard {
  id                    String   @id @default(cuid())
  country               Country? @relation("HealthCard_country", fields: [countryId], references: [id])
  countryId             String?  @map("country")
  dateOfBirth           DateTime
  expiryDate            DateTime
  insurancePolicyNumber String   @default("")
  isVerified            Boolean  @default(false)
  nameOnCard            String   @default("")
  patient               Patient? @relation("HealthCard_patient", fields: [patientId], references: [id])
  patientId             String?  @map("patient")
  versionCode           String   @default("")

  @@index([countryId])
  @@index([patientId])
}

model Country {
  id                  String               @id @default(cuid())
  healthCards         HealthCard[]         @relation("HealthCard_country")
  administrativeAreas AdministrativeArea[] @relation("AdministrativeArea_country")
  isActive            Boolean              @default(false)
  label               String               @default("")
  value               String               @default("")
}

model AdministrativeArea {
  id        String   @id @default(cuid())
  country   Country? @relation("AdministrativeArea_country", fields: [countryId], references: [id])
  countryId String?  @map("country")
  isActive  Boolean  @default(false)
  label     String   @default("")
  value     String   @default("")

  @@index([countryId])
}

model EmergencyContact {
  id                    String   @id @default(cuid())
  email                 String   @default("")
  relation              String   @default("")
  firstName             String   @default("")
  lastName              String   @default("")
  cellPhoneNumberString String   @default("")
  homePhoneNumberString String   @default("")
  patient               Patient? @relation("EmergencyContact_patient", fields: [patientId], references: [id])
  patientId             String?  @map("patient")

  @@index([patientId])
}

model User {
  id                    String            @id @default(cuid())
  email                 String            @unique @default("")
  cellPhoneNumberString String            @default("")
  homePhoneNumberString String            @default("")
  calendar              Calendar?         @relation("Calendar_user")
  country               String            @default("")
  administrativeArea    String            @default("")
  locality              String            @default("")
  postalCode            String            @default("")
  thoroughfare          String            @default("")
  premise               String            @default("")
  dateOfBirth           DateTime?
  doctor                Doctor?           @relation("Doctor_user")
  firstName             String            @default("")
  lastName              String            @default("")
  password              String
  prompts               Prompt[]          @relation("Prompt_user")
  patient               Patient?          @relation("Patient_user")
  sex                   String            @default("")
  stepperProgs          StepperProg[]     @relation("StepperProg_user")
  stepperStepProgs      StepperStepProg[] @relation("StepperStepProg_user")
  username              String            @default("")
}

model Patient {
  id                  String             @id @default(cuid())
  appointments        Appointment[]      @relation("Appointment_patient")
  appointmentVitals   AppointmentVital?  @relation("Patient_appointmentVitals", fields: [appointmentVitalsId], references: [id])
  appointmentVitalsId String?            @map("appointmentVitals")
  appointmentNotes    AppointmentNote?   @relation("Patient_appointmentNotes", fields: [appointmentNotesId], references: [id])
  appointmentNotesId  String?            @map("appointmentNotes")
  bookings            Booking[]          @relation("Booking_patient")
  healthCards         HealthCard[]       @relation("HealthCard_patient")
  isCompleteProfile   Boolean            @default(false)
  name                String             @default("")
  savedDoctors        Doctor[]           @relation("Doctor_savedByPatients")
  user                User?              @relation("Patient_user", fields: [userId], references: [id])
  userId              String?            @unique @map("user")
  visitedDoctors      Doctor[]           @relation("Doctor_patients")
  emergencyContacts   EmergencyContact[] @relation("EmergencyContact_patient")

  @@index([appointmentVitalsId])
  @@index([appointmentNotesId])
}

model Prompt {
  id          String   @id @default(cuid())
  stepper     Stepper? @relation("Prompt_stepper", fields: [stepperId], references: [id])
  stepperId   String?  @unique @map("stepper")
  user        User?    @relation("Prompt_user", fields: [userId], references: [id])
  userId      String?  @map("user")
  name        String   @default("")
  promptType  String   @default("")
  promptValue String   @default("")
  slug        String   @default("")

  @@index([userId])
}

model Stepper {
  id               String            @id @default(cuid())
  title            String            @default("")
  name             String            @default("")
  slug             String            @default("")
  description      String            @default("")
  eyebrow          String            @default("")
  prompt           Prompt?           @relation("Prompt_stepper")
  stepperSteps     StepperStep[]     @relation("StepperStep_stepper")
  stepperProgs     StepperProg[]     @relation("StepperProg_stepper")
  stepperStepProgs StepperStepProg[] @relation("StepperStepProg_stepper")
}

model StepperProg {
  id               String            @id @default(cuid())
  name             String            @default("")
  isCompleted      Boolean           @default(false)
  stepper          Stepper?          @relation("StepperProg_stepper", fields: [stepperId], references: [id])
  stepperId        String?           @map("stepper")
  stepperStepProgs StepperStepProg[] @relation("StepperStepProg_stepperProg")
  user             User?             @relation("StepperProg_user", fields: [userId], references: [id])
  userId           String?           @map("user")

  @@index([stepperId])
  @@index([userId])
}

model StepperStep {
  id                String           @id @default(cuid())
  title             String           @default("")
  description       String           @default("")
  component         String           @default("")
  slug              String           @default("")
  isFinal           Boolean          @default(false)
  order             Int
  stepper           Stepper?         @relation("StepperStep_stepper", fields: [stepperId], references: [id])
  stepperId         String?          @map("stepper")
  stepperStepProg   StepperStepProg? @relation("StepperStep_stepperStepProg", fields: [stepperStepProgId], references: [id])
  stepperStepProgId String?          @unique @map("stepperStepProg")

  @@index([stepperId])
}

model StepperStepProg {
  id            String       @id @default(cuid())
  name          String       @default("")
  percentDone   Int?
  isCompleted   Boolean      @default(false)
  stepper       Stepper?     @relation("StepperStepProg_stepper", fields: [stepperId], references: [id])
  stepperId     String?      @map("stepper")
  stepperStep   StepperStep? @relation("StepperStep_stepperStepProg")
  stepperProg   StepperProg? @relation("StepperStepProg_stepperProg", fields: [stepperProgId], references: [id])
  stepperProgId String?      @map("stepperProg")
  user          User?        @relation("StepperStepProg_user", fields: [userId], references: [id])
  userId        String?      @map("user")

  @@index([stepperId])
  @@index([stepperProgId])
  @@index([userId])
}